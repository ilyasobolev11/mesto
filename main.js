(()=>{"use strict";var e=".elements__list",t={formSelector:".popup__form",inputSelector:".popup__input",inputErrorClass:"popup__input_type_error",submitButtonSelector:".popup__submit-btn",disabledButtonClass:"popup__submit-btn_disabled"},n=document.querySelector(".profile__edit-btn"),r=document.querySelector(".profile__add-btn");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"resetValidation",(function(){r._inputList.forEach((function(e){return r._hideInputError(e)})),r._toggleButtonState()})),i(this,"enableValidation",(function(){r._formElement.addEventListener("submit",(function(e){return e.preventDefault()})),r._setEventListeners()})),this._config=t,this._formElement=document.querySelector(n)}var t,n;return t=e,(n=[{key:"_enableButton",value:function(){this._submitButtonElement.classList.remove(this._config.disabledButtonClass),this._submitButtonElement.removeAttribute("disabled")}},{key:"_disableButton",value:function(){this._submitButtonElement.classList.add(this._config.disabledButtonClass),this._submitButtonElement.setAttribute("disabled","true")}},{key:"_toggleButtonState",value:function(){this._formElement.checkValidity()?this._enableButton():this._disableButton()}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.textContent=""}},{key:"_showInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),t.textContent=e.validationMessage}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_setEventListeners",value:function(){var e=this;this._submitButtonElement=this._formElement.querySelector(this._config.submitButtonSelector),this._inputList=this._formElement.querySelectorAll(this._config.inputSelector),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}}])&&o(t.prototype,n),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n,r,o){var i=t.name,s=t.link;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=i,this._link=s,this._templateSelector=n,this._checkElementListContent=r,this._cardImgClickHandler=o}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".elements__item").cloneNode(!0)}},{key:"_removeCardElement",value:function(){this._cardElement.remove(),this._cardElement=null,this._checkElementListContent()}},{key:"_toggleLikeButtonStatus",value:function(){this.classList.toggle("elements__like-btn_active")}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",this._toggleLikeButtonStatus),this._likeButton.addEventListener("mousedown",(function(e){return e.preventDefault()})),this._imgElement.addEventListener("click",(function(){e._cardImgClickHandler(e._link,e._name)})),this._deleteButton.addEventListener("click",(function(){e._removeCardElement()}))}},{key:"generateCardElement",value:function(){return this._cardElement=this._getTemplate(),this._imgElement=this._cardElement.querySelector(".elements__item-img"),this._likeButton=this._cardElement.querySelector(".elements__like-btn"),this._deleteButton=this._cardElement.querySelector(".elements__delete-btn"),this._setEventListeners(),this._cardElement.querySelector(".elements__item-title").textContent=this._name,this._imgElement.src=this._link,this._imgElement.alt="Фото - ".concat(this._name),this._cardElement}}])&&u(t.prototype,n),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n){var r=t.items,o=t.render,i=t.checkContainer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._render=o,this._checkContainer=i,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e),this._checkContainer&&this._checkContainer()}},{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){return e.addItem(e._render(t))}))}}])&&c(t.prototype,n),e}();function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.close()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this.popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this.popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this.popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handlePopupOverlayClick",value:function(e){e.target.classList.contains("popup")&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this.popup.querySelector(".popup__close-btn").addEventListener("click",(function(){return e.close()})),this.popup.addEventListener("mousedown",this._handlePopupOverlayClick.bind(this))}}])&&p(t.prototype,n),e}();function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(s,e);var t,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e))._imgElement=t.popup.querySelector(".popup__img"),t._imgCaptionElement=t.popup.querySelector(".popup__img-caption"),t.open=t.open.bind(b(t)),t}return t=s,(n=[{key:"open",value:function(e,t){m(E(s.prototype),"open",this).call(this),this._imgElement.src=e,this._imgElement.alt="Фото - ".concat(t),this._imgCaptionElement.textContent=t}}])&&d(t.prototype,n),s}(h);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(s,e);var t,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(r);if(o){var n=O(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function s(e,t,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(o=i.call(this,e))._form=o.popup.querySelector(".popup__form"),o._inputList=o._form.querySelectorAll(".popup__input"),o._submitHandler=t,o._resetValidation=n,o._getInitialValues=r,o}return t=s,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputValues={},this._inputList.forEach((function(t){return e._inputValues[t.name]=t.value})),this._inputValues}},{key:"_setInputValues",value:function(){var e=this;this._inputList.forEach((function(t){return t.value=e._initialValues[t.name]}))}},{key:"setEventListeners",value:function(){var e=this;S(O(s.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitHandler(e._getInputValues()),e.close()}))}},{key:"open",value:function(){S(O(s.prototype),"open",this).call(this),this._getInitialValues&&(this._initialValues=this._getInitialValues(),this._setInputValues())}},{key:"close",value:function(){S(O(s.prototype),"close",this).call(this),this._form.reset(),this._resetValidation()}}])&&w(t.prototype,n),s}(h),I=new function e(t,n){var r,o,i=this,s=t.selector,u=t.hiddenElementClass;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=function(){i._container.hasChildNodes()?i._notification.classList.add(i._hiddenNotificationClass):i._notification.classList.remove(i._hiddenNotificationClass)},(r="check")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this._container=document.querySelector(n),this._notification=document.querySelector(s),this._hiddenNotificationClass=u}({selector:".elements__text-notification",hiddenElementClass:"elements__text-notification_hidden"},e);function P(e){return new a(e,"#card-template",I.check,D.open).generateCardElement()}var q=new l({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],render:P,checkContainer:I.check},e),B=new function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"getUserInfo",(function(){return{userName:r._nameElement.textContent,status:r._statusElement.textContent}})),f(this,"setUserInfo",(function(e){var t=e.userName,n=e.status;r._nameElement.textContent=t,r._statusElement.textContent=n})),this._nameElement=document.querySelector(t),this._statusElement=document.querySelector(n)}(".profile__user-name",".profile__user-status"),V=new s(t,".popup_type_edit-profile .popup__form");V.enableValidation();var x=new s(t,".popup_type_create-card .popup__form");x.enableValidation();var R=new j(".popup_type_edit-profile",B.setUserInfo,V.resetValidation,B.getUserInfo);R.setEventListeners();var T=new j(".popup_type_create-card",(function(e){q.addItem(P(e))}),x.resetValidation);T.setEventListeners();var D=new g(".popup_type_zoom-img");D.setEventListeners(),document.querySelectorAll("button").forEach((function(e){e.addEventListener("mousedown",(function(e){return e.preventDefault()}))})),n.addEventListener("click",(function(){R.open()})),r.addEventListener("click",(function(){T.open()})),q.renderItems()})();
//# sourceMappingURL=main.js.map